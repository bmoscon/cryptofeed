# Unified Trunk configuration for cryptofeed
# Trunk manages tool orchestration, pyproject.toml contains detailed configs
version: 0.1
cli:
  version: 1.24.0
plugins:
  sources:
    - id: trunk
      ref: v1.7.0
      uri: https://github.com/trunk-io/plugins

# Minimal runtimes for essential tools
runtimes:
  enabled:
    - python@3.10.8         # For ruff, bandit
    - node@22.16.0          # For prettier

# Essential CI tools (configs defined in pyproject.toml)
lint:
  enabled:
    # Python tools (configured in pyproject.toml)
    - ruff@0.12.0           # Uses [tool.ruff] config from pyproject.toml
    - bandit@1.8.5          # Uses [tool.bandit] config from pyproject.toml
    
    # File formatting tools
    - prettier@3.5.3        # YAML, Markdown, JSON formatting
    - yamllint@1.37.1       # Uses .trunk/configs/.yamllint.yaml
    
    # Basic Git checks
    - git-diff-check        # No additional config needed
    
  disabled:
    # Performance optimization - disabled in CI
    - mypy                  # Available in dev env via pyproject.toml
    
    # Non-essential for core workflow
    - actionlint            # GitHub Actions validation (optional)
    - markdownlint          # Documentation linting (optional)
    - osv-scanner           # Security scanning (use dedicated workflows)
    - shellcheck            # Shell linting (minimal shell usage)
    - shfmt                 # Shell formatting (minimal shell usage)
    - taplo                 # TOML formatting (ruff handles most cases)
    - trufflehog            # Secret scanning (use dedicated workflows)
    
    # Redundant with ruff
    - black                 # Replaced by ruff format
    - isort                 # Replaced by ruff isort
    - flake8                # Replaced by ruff linting
    - checkov               # Infrastructure scanning (not applicable)

# Minimal trunk actions
actions:
  disabled:
    - trunk-announce
    - trunk-check-pre-push
    - trunk-fmt-pre-commit
  enabled:
    - trunk-upgrade-available